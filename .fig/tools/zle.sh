function accept-and-hold() {
	zle .accept-and-hold
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N accept-and-hold

function accept-and-infer-next-history() {
	zle .accept-and-infer-next-history
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N accept-and-infer-next-history

function accept-and-menu-complete() {
	zle .accept-and-menu-complete
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N accept-and-menu-complete

function accept-line() {
	zle .accept-line
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N accept-line

function accept-search() {
	zle .accept-search
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N accept-search

function argument-base() {
	zle .argument-base
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N argument-base

function auto-suffix-remove() {
	zle .auto-suffix-remove
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N auto-suffix-remove

function auto-suffix-retain() {
	zle .auto-suffix-retain
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N auto-suffix-retain

function backward-char() {
	zle .backward-char
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N backward-char

function backward-delete-char() {
	zle .backward-delete-char
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N backward-delete-char

function backward-delete-word() {
	zle .backward-delete-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N backward-delete-word

function backward-kill-line() {
	zle .backward-kill-line
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N backward-kill-line

function backward-kill-word() {
	zle .backward-kill-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N backward-kill-word

function backward-word() {
	zle .backward-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N backward-word

function beep() {
	zle .beep
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N beep

function beginning-of-buffer-or-history() {
	zle .beginning-of-buffer-or-history
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N beginning-of-buffer-or-history

function beginning-of-history() {
	zle .beginning-of-history
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N beginning-of-history

function beginning-of-line() {
	zle .beginning-of-line
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N beginning-of-line

function beginning-of-line-hist() {
	zle .beginning-of-line-hist
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N beginning-of-line-hist

function bracketed-paste() {
	zle .bracketed-paste
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N bracketed-paste

function capitalize-word() {
	zle .capitalize-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N capitalize-word

function clear-screen() {
	zle .clear-screen
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N clear-screen

function complete-word() {
	zle .complete-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N complete-word

function copy-prev-shell-word() {
	zle .copy-prev-shell-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N copy-prev-shell-word

function copy-prev-word() {
	zle .copy-prev-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N copy-prev-word

function copy-region-as-kill() {
	zle .copy-region-as-kill
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N copy-region-as-kill

function deactivate-region() {
	zle .deactivate-region
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N deactivate-region

function delete-char() {
	zle .delete-char
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N delete-char

function delete-char-or-list() {
	zle .delete-char-or-list
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N delete-char-or-list

function delete-word() {
	zle .delete-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N delete-word

function describe-key-briefly() {
	zle .describe-key-briefly
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N describe-key-briefly

function digit-argument() {
	zle .digit-argument
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N digit-argument

function down-case-word() {
	zle .down-case-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N down-case-word

function emacs-backward-word() {
	zle .emacs-backward-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N emacs-backward-word

function emacs-forward-word() {
	zle .emacs-forward-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N emacs-forward-word

function end-of-buffer-or-history() {
	zle .end-of-buffer-or-history
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N end-of-buffer-or-history

function end-of-history() {
	zle .end-of-history
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N end-of-history

function end-of-line() {
	zle .end-of-line
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N end-of-line

function end-of-line-hist() {
	zle .end-of-line-hist
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N end-of-line-hist

function end-of-list() {
	zle .end-of-list
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N end-of-list

function exchange-point-and-mark() {
	zle .exchange-point-and-mark
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N exchange-point-and-mark

function execute-last-named-cmd() {
	zle .execute-last-named-cmd
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N execute-last-named-cmd

function execute-named-cmd() {
	zle .execute-named-cmd
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N execute-named-cmd

function expand-cmd-path() {
	zle .expand-cmd-path
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N expand-cmd-path

function expand-history() {
	zle .expand-history
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N expand-history

function expand-or-complete() {
	zle .expand-or-complete
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N expand-or-complete

function expand-or-complete-prefix() {
	zle .expand-or-complete-prefix
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N expand-or-complete-prefix

function expand-word() {
	zle .expand-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N expand-word

function forward-char() {
	zle .forward-char
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N forward-char

function forward-word() {
	zle .forward-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N forward-word

function get-line() {
	zle .get-line
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N get-line

function gosmacs-transpose-chars() {
	zle .gosmacs-transpose-chars
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N gosmacs-transpose-chars

function insert-last-word() {
	zle .insert-last-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N insert-last-word

function kill-buffer() {
	zle .kill-buffer
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N kill-buffer

function kill-line() {
	zle .kill-line
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N kill-line

function kill-region() {
	zle .kill-region
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N kill-region

function kill-whole-line() {
	zle .kill-whole-line
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N kill-whole-line

function kill-word() {
	zle .kill-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N kill-word

function list-choices() {
	zle .list-choices
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N list-choices

function list-expand() {
	zle .list-expand
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N list-expand

function magic-space() {
	zle .magic-space
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N magic-space

function menu-complete() {
	zle .menu-complete
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N menu-complete

function menu-expand-or-complete() {
	zle .menu-expand-or-complete
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N menu-expand-or-complete

function neg-argument() {
	zle .neg-argument
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N neg-argument

function overwrite-mode() {
	zle .overwrite-mode
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N overwrite-mode

function pound-insert() {
	zle .pound-insert
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N pound-insert

function push-input() {
	zle .push-input
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N push-input

function push-line() {
	zle .push-line
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N push-line

function push-line-or-edit() {
	zle .push-line-or-edit
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N push-line-or-edit

function put-replace-selection() {
	zle .put-replace-selection
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N put-replace-selection

function quote-line() {
	zle .quote-line
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N quote-line

function quote-region() {
	zle .quote-region
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N quote-region

function quoted-insert() {
	zle .quoted-insert
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N quoted-insert

function read-command() {
	zle .read-command
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N read-command

function recursive-edit() {
	zle .recursive-edit
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N recursive-edit

function redisplay() {
	zle .redisplay
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N redisplay

function redo() {
	zle .redo
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N redo

function reset-prompt() {
	zle .reset-prompt
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N reset-prompt

function reverse-menu-complete() {
	zle .reverse-menu-complete
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N reverse-menu-complete

function run-help() {
	zle .run-help
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N run-help

function select-a-blank-word() {
	zle .select-a-blank-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N select-a-blank-word

function select-a-shell-word() {
	zle .select-a-shell-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N select-a-shell-word

function select-a-word() {
	zle .select-a-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N select-a-word

function select-in-blank-word() {
	zle .select-in-blank-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N select-in-blank-word

function select-in-shell-word() {
	zle .select-in-shell-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N select-in-shell-word

function select-in-word() {
	zle .select-in-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N select-in-word

function self-insert-unmeta() {
	zle .self-insert-unmeta
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N self-insert-unmeta

function send-break() {
	zle .send-break
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N send-break

function set-local-history() {
	zle .set-local-history
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N set-local-history

function set-mark-command() {
	zle .set-mark-command
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N set-mark-command

function spell-word() {
	zle .spell-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N spell-word

function split-undo() {
	zle .split-undo
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N split-undo

function transpose-chars() {
	zle .transpose-chars
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N transpose-chars

function transpose-words() {
	zle .transpose-words
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N transpose-words

function undefined-key() {
	zle .undefined-key
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N undefined-key

function undo() {
	zle .undo
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N undo

function universal-argument() {
	zle .universal-argument
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N universal-argument

function up-case-word() {
	zle .up-case-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N up-case-word

function vi-add-eol() {
	zle .vi-add-eol
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-add-eol

function vi-add-next() {
	zle .vi-add-next
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-add-next

function vi-backward-blank-word() {
	zle .vi-backward-blank-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-backward-blank-word

function vi-backward-blank-word-end() {
	zle .vi-backward-blank-word-end
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-backward-blank-word-end

function vi-backward-char() {
	zle .vi-backward-char
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-backward-char

function vi-backward-delete-char() {
	zle .vi-backward-delete-char
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-backward-delete-char

function vi-backward-kill-word() {
	zle .vi-backward-kill-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-backward-kill-word

function vi-backward-word() {
	zle .vi-backward-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-backward-word

function vi-backward-word-end() {
	zle .vi-backward-word-end
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-backward-word-end

function vi-beginning-of-line() {
	zle .vi-beginning-of-line
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-beginning-of-line

function vi-caps-lock-panic() {
	zle .vi-caps-lock-panic
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-caps-lock-panic

function vi-change() {
	zle .vi-change
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-change

function vi-change-eol() {
	zle .vi-change-eol
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-change-eol

function vi-change-whole-line() {
	zle .vi-change-whole-line
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-change-whole-line

function vi-cmd-mode() {
	zle .vi-cmd-mode
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-cmd-mode

function vi-delete() {
	zle .vi-delete
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-delete

function vi-delete-char() {
	zle .vi-delete-char
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-delete-char

function vi-digit-or-beginning-of-line() {
	zle .vi-digit-or-beginning-of-line
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-digit-or-beginning-of-line

function vi-down-case() {
	zle .vi-down-case
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-down-case

function vi-end-of-line() {
	zle .vi-end-of-line
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-end-of-line

function vi-fetch-history() {
	zle .vi-fetch-history
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-fetch-history

function vi-find-next-char() {
	zle .vi-find-next-char
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-find-next-char

function vi-find-next-char-skip() {
	zle .vi-find-next-char-skip
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-find-next-char-skip

function vi-find-prev-char() {
	zle .vi-find-prev-char
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-find-prev-char

function vi-find-prev-char-skip() {
	zle .vi-find-prev-char-skip
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-find-prev-char-skip

function vi-first-non-blank() {
	zle .vi-first-non-blank
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-first-non-blank

function vi-forward-blank-word() {
	zle .vi-forward-blank-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-forward-blank-word

function vi-forward-blank-word-end() {
	zle .vi-forward-blank-word-end
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-forward-blank-word-end

function vi-forward-char() {
	zle .vi-forward-char
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-forward-char

function vi-forward-word() {
	zle .vi-forward-word
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-forward-word

function vi-forward-word-end() {
	zle .vi-forward-word-end
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-forward-word-end

function vi-goto-column() {
	zle .vi-goto-column
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-goto-column

function vi-goto-mark() {
	zle .vi-goto-mark
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-goto-mark

function vi-goto-mark-line() {
	zle .vi-goto-mark-line
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-goto-mark-line

function vi-history-search-backward() {
	zle .vi-history-search-backward
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-history-search-backward

function vi-history-search-forward() {
	zle .vi-history-search-forward
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-history-search-forward

function vi-indent() {
	zle .vi-indent
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-indent

function vi-insert() {
	zle .vi-insert
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-insert

function vi-insert-bol() {
	zle .vi-insert-bol
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-insert-bol

function vi-join() {
	zle .vi-join
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-join

function vi-kill-eol() {
	zle .vi-kill-eol
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-kill-eol

function vi-kill-line() {
	zle .vi-kill-line
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-kill-line

function vi-match-bracket() {
	zle .vi-match-bracket
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-match-bracket

function vi-open-line-above() {
	zle .vi-open-line-above
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-open-line-above

function vi-open-line-below() {
	zle .vi-open-line-below
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-open-line-below

function vi-oper-swap-case() {
	zle .vi-oper-swap-case
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-oper-swap-case

function vi-pound-insert() {
	zle .vi-pound-insert
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-pound-insert

function vi-put-after() {
	zle .vi-put-after
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-put-after

function vi-put-before() {
	zle .vi-put-before
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-put-before

function vi-quoted-insert() {
	zle .vi-quoted-insert
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-quoted-insert

function vi-repeat-change() {
	zle .vi-repeat-change
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-repeat-change

function vi-repeat-find() {
	zle .vi-repeat-find
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-repeat-find

function vi-repeat-search() {
	zle .vi-repeat-search
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-repeat-search

function vi-replace() {
	zle .vi-replace
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-replace

function vi-replace-chars() {
	zle .vi-replace-chars
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-replace-chars

function vi-rev-repeat-find() {
	zle .vi-rev-repeat-find
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-rev-repeat-find

function vi-rev-repeat-search() {
	zle .vi-rev-repeat-search
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-rev-repeat-search

function vi-set-buffer() {
	zle .vi-set-buffer
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-set-buffer

function vi-set-mark() {
	zle .vi-set-mark
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-set-mark

function vi-substitute() {
	zle .vi-substitute
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-substitute

function vi-swap-case() {
	zle .vi-swap-case
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-swap-case

function vi-undo-change() {
	zle .vi-undo-change
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-undo-change

function vi-unindent() {
	zle .vi-unindent
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-unindent

function vi-up-case() {
	zle .vi-up-case
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-up-case

function vi-yank() {
	zle .vi-yank
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-yank

function vi-yank-eol() {
	zle .vi-yank-eol
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-yank-eol

function vi-yank-whole-line() {
	zle .vi-yank-whole-line
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N vi-yank-whole-line

function visual-line-mode() {
	zle .visual-line-mode
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N visual-line-mode

function visual-mode() {
	zle .visual-mode
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N visual-mode

function what-cursor-position() {
	zle .what-cursor-position
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N what-cursor-position

function where-is() {
	zle .where-is
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N where-is

function which-command() {
	zle .which-command
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N which-command

function yank() {
	zle .yank
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N yank

function yank-pop() {
	zle .yank-pop
	( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
}
zle -N yank-pop

## Control-R

function history-beginning-search-backward() {
	( fig bg:hide ) &!
	zle .history-beginning-search-backward
}
zle -N history-beginning-search-backward

function history-beginning-search-forward() {
	( fig bg:hide ) &!
	zle .history-beginning-search-forward
}
zle -N history-beginning-search-forward

function history-incremental-pattern-search-backward() {
	( fig bg:hide ) &! 
	zle .history-incremental-pattern-search-backward
}
zle -N history-incremental-pattern-search-backward

function history-incremental-pattern-search-forward() {
	( fig bg:hide ) &!
	zle .history-incremental-pattern-search-forward
}
zle -N history-incremental-pattern-search-forward

function history-incremental-search-backward() {
	( fig bg:hide ) &!
	zle .history-incremental-search-backward
}
zle -N history-incremental-search-backward

function history-incremental-search-forward() {
	( fig bg:hide ) &!
	zle .history-incremental-search-forward
}
zle -N history-incremental-search-forward

function history-search-backward() {
	( fig bg:hide ) &!
	zle .history-search-backward
}
zle -N history-search-backward

function history-search-forward() {
	( fig bg:hide ) &!
	zle .history-search-forward
}
zle -N history-search-forward

function infer-next-history() {
	( fig bg:hide ) &!
	zle .infer-next-history
}
zle -N infer-next-history

## Up arrow 

function up-history() {
	zle .up-history
	( fig bg:hide ) &!
}
zle -N up-history

function up-line() {
	zle .up-line
	( fig bg:hide ) &!
}
zle -N up-line

function up-line-or-history() {
	zle .up-line-or-history
	( fig bg:hide ) &!
}
zle -N up-line-or-history

function up-line-or-search() {
	zle .up-line-or-search
	( fig bg:hide ) &!
}
zle -N up-line-or-search

function vi-up-line-or-history() {
	zle .vi-up-line-or-history
	( fig bg:hide ) &!
}
zle -N vi-up-line-or-history

## Down arrow

function down-history() {
	zle .down-history
	( fig bg:hide ) &!
}
zle -N down-history

function down-line() {
	zle .down-line
	( fig bg:hide ) &!
}
zle -N down-line

function down-line-or-history() {
	zle .down-line-or-history
	( fig bg:hide ) &!
}
zle -N down-line-or-history

function down-line-or-search() {
	zle .down-line-or-search
	( fig bg:hide ) &!
}
zle -N down-line-or-search

function accept-line-and-down-history() {
	zle .accept-line-and-down-history
	( fig bg:hide ) &!
}
zle -N accept-line-and-down-history

function vi-down-line-or-history() {
	zle .vi-down-line-or-history
	( fig bg:hide ) &!
}
zle -N vi-down-line-or-history

## Add insertion lock. See ShellBridge.insertUnicodeString
function self-insert() {
	zle .self-insert
	if [ ! -f ~/.fig/insertion-lock ]; then
		( fig bg:zsh-keybuffer $CURSOR "$BUFFER" ) &!
	fi
}
zle -N self-insert

# Don't export, limit to ZSH
# FIG_ZLE_INTEGRATION=1
